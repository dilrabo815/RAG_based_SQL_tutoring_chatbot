# Retrieval-Augmented Generation (RAG) System for SQL Tutoring

This repository contains the Artificial Intelligence (AI) and Retrieval-Augmented Generation (RAG) implementation for the Intelligent SQL Learning Tutor project. 

The project aims to provide personalized learning assistance by retrieving relevant context and generating accurate explanations using a Large Language Model.

## Project Architecture

This project is part of a distributed system comprising two distinct components:

1.  **AI & Initialization Pipeline (This Repository):** Responsible for data ingestion, text tokenization and embedding, vector search (FAISS), and Large Language Model (LLM) orchestration for response generation.
    *   **Contributors:** Dilrabo Orzikulova and Mumtozmahal Salimova
2.  **Database & Infrastructure Pipeline:** Responsible for the underlying PostgreSQL database, structured data storage, and SQL schemas. 
    *   **Contributor:** Kamoliddin Saloxutdinov 
    *   **Repository:** [ksaloxutdinov/chatbot_cheatsheet](https://github.com/ksaloxutdinov/chatbot_cheatsheet)

## System Overview & Features

This component of the project implements a robust RAG pipeline designed to minimize hallucinations and provide contextually accurate answers to SQL queries.

*   **Large Language Model Integration:** Utilizes the `Qwen/Qwen2-1.5B-Instruct` model for efficient, instruction-tuned text generation capable of running on consumer hardware (e.g., NVIDIA T4 GPUs).
*   **Vector Embedding Strategy:** Employs the `sentence-transformers/all-MiniLM-L6-v2` model to map unstructured text into dense vector representations.
*   **Dual-Index Retrieval System:**
    *   **Static Knowledge Base:** Ingests structured `.sql` dump data and encodes foundational SQL knowledge into a FAISS (Facebook AI Similarity Search) index.
    *   **Dynamic Web Retrieval:** Implements a polite web crawler targeting interactive coding tutorials (e.g., sqlbolt.com). The crawler incorporates `BeautifulSoup` and `readability-lxml` for robust HTML parsing and text extraction, populating a secondary FAISS index.
*   **Response Verification Protocol:** Features custom verification logic that evaluates the cosine similarity and term overlap between the generated LLM response and the retrieved source context. If the similarity threshold is not met, the system returns a standard fallback response ("Not enough information") to prevent hallucination.

## Technical Stack

*   **Language:** Python 3
*   **Environment:** Jupyter Notebook / Google Colab
*   **Machine Learning & NLP:** `transformers`, `accelerate`, `sentence-transformers`
*   **Vector Search:** `faiss-cpu`
*   **Data Extraction & Parsing:** `requests`, `beautifulsoup4`, `readability-lxml`

## Setup and Execution

1.  **Dependencies:** Ensure the required Python packages are installed:
    ```bash
    pip install transformers accelerate sentence-transformers faiss-cpu langchain beautifulsoup4 requests readability-lxml
    ```
2.  **Prerequisites:** Place the structured database dump (`chatbot_db_export.sql`), generated by the Database Pipeline, in the root directory of this repository.
3.  **Execution:** Run the `rag_final_version.ipynb` notebook. The script will automatically initialize the vector indexes, load the LLM weights, and provide an interactive terminal interface for querying.
